define(["ojs/ojcore","knockout","jquery","ojs/ojknockout","ojs/ojtimeline","ojs/ojbutton","ojs/ojtreemap","ojs/ojpopup"],function(e,t,o){return new function(){var n=this,r=document.querySelector("#tline");e.Context.getContext(r).getBusyContext().whenReady().then(function(){document.querySelector("#popup1").open("#tlineArea")}),n.closePopup1=function(){document.querySelector("#popup2").open("#navigationMenu")},n.closePopup2=function(){document.querySelector("#popup3").open("#tline")},n.closePopup3=function(){document.querySelector("#popup4").open("#treemap")};var i=t.observableArray();n.timelineSeries=t.computed(function(){return[{id:"s1",emptyText:"Loading ...",label:"19th Century Historical Events",items:i()}]}),o.getJSON("js/timelineEvents.json",function(e){i(e)}),n.orientationValue=t.observable("horizontal"),n.orientationOptions=t.observableArray([{id:"horizontal",label:"horizontal"},{id:"vertical",label:"vertical"}]);var a=new e.ColorAttributeGroupHandler,u=p("Chemistry","0",1,b()),s=p("Physics","1",1,b()),l=p("Biology","2",1,b());d(u,[p("The battery","00",1,b())]),d(s,[p("Atomic theory","10",1,b())]),d(l,[p("Teleological Evolution","20",1,b())]);var c=[u,s,l];function p(e,t,o,n){return{label:e,id:t,value:o,color:n}}function d(e,t){e.nodes=[];for(var o=0;o<t.length;o++)e.nodes.push(t[o])}function b(){return a.getValue(Math.floor(140*Math.random()))}n.nodeValues=t.observableArray(c),n.colorButtonClick=function(e){for(var t=0;t<c.length;t++)for(var o=0;o<c[t].nodes.length;o++)Math.random()<.4&&(c[t].nodes[o].color=b());return n.nodeValues(c),!0},n.listener=function(e){n.timelineSeries()[0].items.forEach(t=>{if(e.detail.viewportStart<new Date(t.start).toISOString()&&new Date(t.start).toISOString()<e.detail.viewportEnd&&("Chemistry"==t.category?(subCat=t.subcategory,subCat_id=t.subcategory_id,parent=c[0]):"Physics"==t.category?(subCat=t.subcategory,subCat_id=t.subcategory_id,parent=c[1]):"Biology"==t.category&&(subCat=t.subcategory,subCat_id=t.subcategory_id,parent=c[2]),0==function(e,t){exists=!1;for(var o=0;o<e.nodes.length;o++)e.nodes[o].id==t&&(exists=!0);return exists}(parent,subCat_id))){var o={label:subCat,id:subCat_id,value:2,color:b()};parent.nodes.push(o),n.colorButtonClick()}})}}});