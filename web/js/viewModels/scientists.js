define(["ojs/ojcore","knockout","jquery","ojs/ojknockout","ojs/ojinputtext","ojs/ojlistview","ojs/ojjsontreedatasource","ojs/ojcollectiontabledatasource","ojs/ojbutton","ojs/ojlabel"],function(e,o,t){return new function(){var a=this;a.data=o.observable(),a.filter=o.observable(""),a.dataSource=o.observable(),a.nameFilter=function(e,o,t){return e.get("name").toLowerCase().indexOf(t.toLowerCase())>-1},a.handleRawValueChanged=function(o){var t=o.detail.value;if(0==t.length)a.dataSource()==a.filteredDataSource&&a.dataSource(a.contactDataSource);else{void 0==a.filteredDataSource&&(a.collection=function(o){for(var t=new e.Collection,a=0;a<o.length;a++){var n=o[a].children;if(null!=n&&n.length>0)for(var c=0;c<n.length;c++)t.add(n[c].attr)}return t}(a.data()),a.filteredCollection=a.collection.clone(),a.filteredDataSource=new e.CollectionTableDataSource(a.filteredCollection));var n=a.collection.where({name:{value:t,comparator:a.nameFilter}});a.filteredCollection.reset(n),a.dataSource()==a.contactDataSource&&a.dataSource(a.filteredDataSource)}},a.itemOnly=function(e){return void 0==e.leaf||e.leaf},t.getJSON("js/contacts.json",function(o){a.data(o),a.contactDataSource=new e.JsonTreeDataSource(o),a.dataSource(a.contactDataSource)}),a.connected=function(){},a.disconnected=function(){},a.transitionCompleted=function(){}}});